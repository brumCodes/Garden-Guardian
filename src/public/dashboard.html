<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="/assets/logo.png">
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/css/modais.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/js/dashboard.js" defer></script>
    <title>Garden Guardian | Dashboard</title>
</head>
<body class="garden-app">
    <header class="app-header">
        <div class="logo-main">
            <a href="/" class="header-icon-left" title="Sair para o in√≠cio">‚¨Ö</a>
            <img src="/assets/logo.png" alt="Logo">
            <div class="header-icon-right" title="Perfil do Usu√°rio" onclick="abrirModalPerfil()">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            </div>
        </div>
        <nav class="main-nav">
            <a href="/plantas.html" class="nav-link">MINHAS PLANTAS</a>
            <a href="/dashboard.html" class="nav-link active">DASHBOARD</a>
            <a href="/agenda.html" class="nav-link">AGENDA</a>
        </nav>
    </header>

    <main class="plants-container dashboard-main">
        
        <div id="modoSemente" style="display: none; flex-direction: column; align-items: center; justify-content: center; min-height: 450px; text-align: center;">
            <h2 style="color: var(--orange-main); font-weight: 400; font-size: 1.8rem; margin-bottom: 10px;">
                Seu jardim ainda est√° em modo semente
            </h2>
            <span style="font-size: 3rem; margin-bottom: 20px;">üçÉ</span>
            <p style="color: var(--text-dark); font-size: 1.2rem;">
                Cadastre suas plantas e comece a cultivar seus dados!
            </p>
            <a href="/plantas.html" class="btn-alert" style="margin-top: 30px; text-decoration: none; background-color: var(--orange-main); color: white; padding: 10px 20px; border-radius: 8px; font-weight: bold;">CADASTRAR PLANTAS</a>
        </div>

        <div id="conteudoReal" style="display: none;">
            <div class="welcome-section">
                <h1>Ol√°, <span id="userWelcomeName">Jardineiro</span>! üåø</h1>
                <p>Hoje √© um √≥timo dia para colocar as m√£os na terra.</p>
            </div>

            <div class="dash-top-row">
                <div class="dash-card left-box">
                    <h3 class="dash-title">AS QUERIDINHAS</h3>
                    <div class="podium-container">
                        <p style="width: 100%; text-align: center; color: #999;">Carregando p√≥dio...</p>
                    </div>
                    <div class="dashed-divider"></div>
                    <h3 class="dash-title">MANTENHA O RITMO! PR√ìXIMAS ATIVIDADES:</h3>
                    <div class="grid-list" id="listaProximasDash">
                        <p style="color: #999;">Carregando atividades...</p>
                    </div>
                </div>

                <div class="dash-right-col">
                    <div class="dash-card">
                        <h3 class="dash-title">N√ÉO SE ESQUE√áA DE MIM</h3>
                        <div class="bars-container" id="listaEsquecidas">
                            <p style="color: #999;">Verificando hist√≥rico...</p>
                        </div>
                    </div>
                    <div class="dash-card">
                        <h3 class="dash-title">ATIVIDADES EXPIRADAS</h3>
                        <div class="grid-list" id="listaExpiradas">
                            <p style="color: #999;">Verificando atrasos...</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dash-card full-width" style="margin-top: 20px;">
                <h3 class="dash-title">RELAT√ìRIOS DE CONTROLE</h3>
                <div class="reports-flex">
                    <div class="report-box">
                        <canvas id="graficoPizza"></canvas>
                        <p class="chart-label">ESP√âCIES ACUMULADAS</p>
                    </div>
                    <div class="report-center">
                        <div class="big-number"><span id="totalPlantasDash">0</span><br><small>PLANTAS</small></div>
                        <div class="big-number"><span id="totalEspeciesDash">0</span><br><small>ESP√âCIES</small></div>
                    </div>
                    <div class="report-box">
                        <canvas id="graficoLinha"></canvas>
                        <p class="chart-label">INCID√äNCIA DE PRAGAS</p>
                    </div>
                </div>
            </div>

            <div style="background: #FFF8E1; border-left: 5px solid var(--orange-main); padding: 15px; margin-top: 30px; border-radius: 8px; color: #5d4037; font-size: 0.95rem; display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 1.2rem;">üí°</span>
                <span><strong>Importante:</strong> Para que os c√°lculos abaixo sejam exatos, configure os padr√µes em <strong>"Gerir Recursos".</strong></span>
            </div>

            <div class="insumos-row" style="margin-top: 20px;">
                <div class="insumo-card">
                    <h4>√ÅGUA</h4>
                    <h2 id="qtdAgua">0 L</h2>
                    <p>este m√™s</p>
                    <div class="insumo-icon">üíß</div>
                </div>
                <div class="insumo-card">
                    <h4>ADUBO</h4>
                    <h2 id="qtdAdubo">0 g</h2>
                    <p>este m√™s</p>
                    <div class="insumo-icon">‚ö°</div>
                </div>
                <div class="insumo-card">
                    <h4>SUBSTRATO</h4>
                    <h2 id="qtdSubstrato">0 Kg</h2>
                    <p>este m√™s</p>
                    <div class="insumo-icon">ü™¥</div>
                </div>
                <div class="insumo-card">
                    <h4>PESTICIDAS</h4>
                    <h2 id="qtdPesticida">0 ml</h2>
                    <p>este m√™s</p>
                    <div class="insumo-icon">ü¶†</div>
                </div>
            </div>
        </div>
    </main>

    <div id="modalPerfil" class="modal-overlay" style="display: none;">
        <div class="modal-box" style="min-height: 400px;">
            <div class="clip-metal"></div>
            <span class="close-modal" onclick="document.getElementById('modalPerfil').style.display='none'">&times;</span>
            
            <h2 class="form-title">Meu Perfil</h2>
            
            <form id="formPerfil" class="garden-form">
                <div class="input-group">
                    <label>Nome</label>
                    <input type="text" id="perfilNome" required>
                </div>

                <div class="input-group">
                    <label>E-mail</label>
                    <input type="email" id="perfilEmail" required>
                </div>

                <div class="form-footer" style="flex-direction: column; gap: 10px;">
                    <button type="submit" class="btn-solid-modal">SALVAR ALTERA√á√ïES</button>
                    <button type="button" onclick="fazerLogout()" style="background: transparent; border: 2px solid #E74C3C; color: #E74C3C; padding: 12px; border-radius: 30px; font-weight: bold; cursor: pointer; width: 100%;">
                        SAIR DA CONTA
                    </button>
                </div>
            </form>
        </div>
    </div>

    <footer class="app-footer">
        <div class="fence-only"></div>
    </footer>
</body>
</html>